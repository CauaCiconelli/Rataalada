<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/estilo.css">
    <script src="funcs/main.js"></script>
    <script src="funcs/funcs.js"></script>
    <title>BOLETIM DE OCORRÊNCIA - DPGC</title>
</head>
<body>
    <div class="header">
        <div class="container">
            <img id="logoGCPD" src="https://i.pinimg.com/originals/ed/12/9b/ed129b01fe3ffa757a2fc83ed5a23042.png">
            DPGC
        </div>
        <ul class="navBar">
            <li><a href="index.html">HOME</a></li>
            <li><a href="boletim.html" class="aqui">BOLETIM DE OCORRÊNCIA</a></li>
            <li><a href="delegacias.html">DELEGACIAS</a></li>
            <li><a href="mw.html">MAIS PROCURADOS</a></li>
            <li><a href="batman.html">BATMAN</a></li>
        </ul>
    </div>
    <div class="boletim" id="boletimDen">
        <div class="quadroBoletim">
            <p class="nomeBol">Insira seu nome:</p> <input type="text" id="nomeBol">
            <div class="anomBol">
                <p>Clique aqui caso deseje que a denúncia seja anônima</p><input type="checkbox" id="anomBol">
            </div>
            <p class="localBol">Insira a sua localização:</p><input type="text" id="localBol" placeholder="Ex: Rua dos Morcegos 3">
            <p class="telBol">Insira um telefone de contato</p><input type="text" id="telBol" placeholder="Ex: (XX) XXXX-XXXX"> 
            <p class="distBol">Selecione o distrito onde o crime ocorreu:</p>
            <select id="distBol">
                <option value="0">--Selecione uma opção--</option>
                <option value="1">Gotham Central</option>
                <option value="2">Velha Gotham</option>
                <option value="3">Chinatown</option>
                <option value="4">Bristol</option>
                <option value="5">Midtown</option>
                <option value="6">Burnley</option>
                <option value="7">East End</option>
                <option value="8">Otisburg</option>
                <option value="9">Tricorner</option>
            </select>
            <button onclick="denuncia()">Enviar</button>
        </div>
    </div>
    <div class="footer">
        <p class="footerTxt">A Polícia de Gotham é administrada pelo Governo de Gotham City. Todos os recursos e deveres são fornecidos pelo povo. Viva Gotham!</p>
    </div>
</body>
</html>
<script>
    function concluirDen() {
        //Recupere o valor da nova input pelo nome do id
        // Agora vá para o método fetch logo abaixo
        var userVar = userInp.value;
        var senhaVar = passInp.value;
        var confirmacaoSenhaVar = passConfInp.value;
    
        if (userVar == "" || senhaVar == "" || confirmacaoSenhaVar == "") {
            cardErro.style.display = "block"
            mensagem_erro.innerHTML = "&gt; Se você não consegue cadastrar um usuário então você não é o charada!";
            return false;
        }
        else {
        }
    
        // Enviando o valor da nova input
        fetch("/denuncias/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                userServer: userVar,
                senhaServer: senhaVar
            })
        }).then(function (resposta) {
    
            console.log("resposta: ", resposta);
    
            if (resposta.ok) {
                mensagem_erro.innerHTML = "Cadastro realizado?";
    
                setTimeout(() => {
                    window.location = "centro.html";
                }, "2000")
                
                limparFormulario();
            } else {
                throw ("Houve um erro ao tentar realizar o cadastro!");
            }
        }).catch(function (resposta) {
            console.log(`#ERRO: ${resposta}`);
            finalizarAguardar();
        });
    
        return false;    
    }
            

</script>