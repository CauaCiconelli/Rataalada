<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="funcs/funcs.js"></script>
  <script src="js/funcoes.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="css/estiloc.css">
  <title>&lt;rataalada?&gt;</title>
</head>

<body>
  <div class="container">
    <div class="identidade">&gt; Contagem dos crimes em Gotham; Insira o distrito desejado <input id="distInp" onchange="obterDadosGrafico()"></div>
  </div>
  <div class="container">
    <div id="crimes">0</div>
  </div>
  <div class="container">
    <div class="lista">&gt; Objetivos do dia:</div>
  </div>
  <div class="container" id="lista">
    1º Terminar os preparativos para o plano
  </div>
  <div class="container">
    <div class="listar">Insira novos objetivos: <input type="text" id="listagem"></div>
  </div>
  <div class="container">
    <div class="listaObj">Deseja inserir o objetivo? [y/n] <input type="text" id="inserir" onkeyup="listaObj()"></div>
  </div>
  </div>
  <div class="proceedCentro">&gt; Cadastrar novo usuário [y/n] <input id="procInp" onkeyup="cadastroPag()"></div>
  <div class="proceedCentro2">&gt; Sair [y/n] <input id="procInp2" onkeyup="sair()"></div>
</body>

</html>
<script>
  var dist = Number(distInp.value)
  var res = 0

  window.onload = obterDadosGrafico();
  setInterval(() => {
    obterDadosGrafico
  }, interval);
  window.onload = mostrarLista();

  // verificar_autenticacao();

  function obterDadosGrafico() {
    if (distInp.value == '') {
      var distVar = 1
    } else {
      var distVar = dist
    }
    fetch("/denuncias/pegarDado", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        distServer: distVar
      })
    })
      .then(function (resposta) {
        if (resposta.ok) {
          console.log(resposta);

          resposta.json().then(json => {
            console.log(json[0].DistCont);
            console.log(json.distrito);
            res = json[0].DistCont
            crimes.innerHTML = res
            // sessionStorage.EMAIL_USUARIO = json.email;

          });
        } else {

          console.log("Houve um erro ao tentar realizar o login!");
          resposta.text().then(texto => {
            console.error(texto);
          });
        }

      }).catch(function (erro) {
        console.log(erro);
      })

    return false;
  }

</script>